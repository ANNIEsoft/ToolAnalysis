\hypertarget{classIFBeamDBInterface}{
\section{IFBeamDBInterface Class Reference}
\label{classIFBeamDBInterface}\index{IFBeamDBInterface@{IFBeamDBInterface}}
}


Singleton used to interact with the Intensity Frontier beam database at Fermilab.  


{\ttfamily \#include $<$IFBeamDBInterface.h$>$}\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classIFBeamDBInterface_ac6e95cfed4db9c455289234f26a2f1c1}{
\hyperlink{classIFBeamDBInterface_ac6e95cfed4db9c455289234f26a2f1c1}{$\sim$IFBeamDBInterface} ()}
\label{classIFBeamDBInterface_ac6e95cfed4db9c455289234f26a2f1c1}

\begin{DoxyCompactList}\small\item\em Clean up libcurl stuff as the \hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} object is destroyed. \item\end{DoxyCompactList}\item 
\hypertarget{classIFBeamDBInterface_a5a3bc058c6b8ca2e3d13b85ca1f42e2d}{
\hyperlink{classIFBeamDBInterface_a5a3bc058c6b8ca2e3d13b85ca1f42e2d}{IFBeamDBInterface} (const \hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} \&)}
\label{classIFBeamDBInterface_a5a3bc058c6b8ca2e3d13b85ca1f42e2d}

\begin{DoxyCompactList}\small\item\em Deleted copy constructor. \item\end{DoxyCompactList}\item 
\hypertarget{classIFBeamDBInterface_a25624ce40601f7ee32b039c34466d5cc}{
\hyperlink{classIFBeamDBInterface_a25624ce40601f7ee32b039c34466d5cc}{IFBeamDBInterface} (\hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} \&\&)}
\label{classIFBeamDBInterface_a25624ce40601f7ee32b039c34466d5cc}

\begin{DoxyCompactList}\small\item\em Deleted move constructor. \item\end{DoxyCompactList}\item 
\hypertarget{classIFBeamDBInterface_a9550adf51f7c043e9ba628e920202ec2}{
\hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} \& \hyperlink{classIFBeamDBInterface_a9550adf51f7c043e9ba628e920202ec2}{operator=} (const \hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} \&)}
\label{classIFBeamDBInterface_a9550adf51f7c043e9ba628e920202ec2}

\begin{DoxyCompactList}\small\item\em Deleted copy assignment operator. \item\end{DoxyCompactList}\item 
\hypertarget{classIFBeamDBInterface_a66a70c1666620601852ceec5038c3c62}{
\hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} \& \hyperlink{classIFBeamDBInterface_a66a70c1666620601852ceec5038c3c62}{operator=} (\hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} \&\&)}
\label{classIFBeamDBInterface_a66a70c1666620601852ceec5038c3c62}

\begin{DoxyCompactList}\small\item\em Deleted move assignment operator. \item\end{DoxyCompactList}\item 
std::map$<$ std::string, std::map$<$ uint64\_\-t, \hyperlink{structBeamDataPoint}{BeamDataPoint} $>$ $>$ \hyperlink{classIFBeamDBInterface_a7b0e4c42767791f1904540b63772a74d}{QueryBeamDB} (uint64\_\-t t0, uint64\_\-t t1) const 
\begin{DoxyCompactList}\small\item\em Get information about the Booster Neutrino Beam (BNB) state from the database for the time interval \mbox{[}t0, t1\mbox{]}. \item\end{DoxyCompactList}\item 
int \hyperlink{classIFBeamDBInterface_a034ef023cb78989270a4ec2d54a5aa4f}{QueryBeamDB} (uint64\_\-t t0, uint64\_\-t t1, std::string \&response\_\-string) const 
\begin{DoxyCompactList}\small\item\em Get information about the BNB state from the database for the time interval \mbox{[}t0, t1\mbox{]}. \item\end{DoxyCompactList}\item 
\hyperlink{classBeamStatus}{BeamStatus} \hyperlink{classIFBeamDBInterface_add525c53cbf0b85c3cd0d39a5b9b0fdd}{GetBeamStatus} (uint64\_\-t time) const 
\begin{DoxyCompactList}\small\item\em Get information about the BNB state from the database as close as possible to a given time. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classIFBeamDBInterface_a677ed1a3b7dbfc70ffb0688078ae5fb0}{
static const \hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} \& \hyperlink{classIFBeamDBInterface_a677ed1a3b7dbfc70ffb0688078ae5fb0}{Instance} ()}
\label{classIFBeamDBInterface_a677ed1a3b7dbfc70ffb0688078ae5fb0}

\begin{DoxyCompactList}\small\item\em Get a const reference to the singleton instance of the \hyperlink{classIFBeamDBInterface}{IFBeamDBInterface}. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classIFBeamDBInterface_af5275e528b9b43d4c5dacd0a8a3ca62b}{
\hyperlink{classIFBeamDBInterface_af5275e528b9b43d4c5dacd0a8a3ca62b}{IFBeamDBInterface} ()}
\label{classIFBeamDBInterface_af5275e528b9b43d4c5dacd0a8a3ca62b}

\begin{DoxyCompactList}\small\item\em Create the singleton \hyperlink{classIFBeamDBInterface}{IFBeamDBInterface} object. \item\end{DoxyCompactList}\item 
\hypertarget{classIFBeamDBInterface_a950bec54fb41eaf48471a8a1eab8ab71}{
std::map$<$ std::string, std::map$<$ uint64\_\-t, \hyperlink{structBeamDataPoint}{BeamDataPoint} $>$ $>$ {\bfseries ParseDBResponse} (const std::string \&response) const }
\label{classIFBeamDBInterface_a950bec54fb41eaf48471a8a1eab8ab71}

\item 
\hypertarget{classIFBeamDBInterface_a2d7b151e8b21fe5f7d255d442d37e321}{
void {\bfseries PostprocessParsedResponse} (std::map$<$ std::string, std::map$<$ uint64\_\-t, \hyperlink{structBeamDataPoint}{BeamDataPoint} $>$ $>$ \&parsed\_\-response) const }
\label{classIFBeamDBInterface_a2d7b151e8b21fe5f7d255d442d37e321}

\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classIFBeamDBInterface_a7dea07c539e0f0ca765f02d198345d2d}{
CURL $\ast$ \hyperlink{classIFBeamDBInterface_a7dea07c539e0f0ca765f02d198345d2d}{fCurl} = nullptr}
\label{classIFBeamDBInterface_a7dea07c539e0f0ca765f02d198345d2d}

\begin{DoxyCompactList}\small\item\em Pointer used to interact with libcurl. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Singleton used to interact with the Intensity Frontier beam database at Fermilab. 

\subsection{Member Function Documentation}
\hypertarget{classIFBeamDBInterface_add525c53cbf0b85c3cd0d39a5b9b0fdd}{
\index{IFBeamDBInterface@{IFBeamDBInterface}!GetBeamStatus@{GetBeamStatus}}
\index{GetBeamStatus@{GetBeamStatus}!IFBeamDBInterface@{IFBeamDBInterface}}
\subsubsection[{GetBeamStatus}]{\setlength{\rightskip}{0pt plus 5cm}{\bf BeamStatus} IFBeamDBInterface::GetBeamStatus (uint64\_\-t {\em time}) const}}
\label{classIFBeamDBInterface_add525c53cbf0b85c3cd0d39a5b9b0fdd}


Get information about the BNB state from the database as close as possible to a given time. 
\begin{DoxyParams}{Parameters}
\item[{\em time}]Timestamp (milliseconds since the Unix epoch) to use when searching the database \end{DoxyParams}
\hypertarget{classIFBeamDBInterface_a034ef023cb78989270a4ec2d54a5aa4f}{
\index{IFBeamDBInterface@{IFBeamDBInterface}!QueryBeamDB@{QueryBeamDB}}
\index{QueryBeamDB@{QueryBeamDB}!IFBeamDBInterface@{IFBeamDBInterface}}
\subsubsection[{QueryBeamDB}]{\setlength{\rightskip}{0pt plus 5cm}int IFBeamDBInterface::QueryBeamDB (uint64\_\-t {\em t0}, \/  uint64\_\-t {\em t1}, \/  std::string \& {\em response\_\-string}) const}}
\label{classIFBeamDBInterface_a034ef023cb78989270a4ec2d54a5aa4f}


Get information about the BNB state from the database for the time interval \mbox{[}t0, t1\mbox{]}. 
\begin{DoxyParams}{Parameters}
\item[{\em t0}]Starting timestamp (milliseconds since the Unix epoch) \item[{\em t1}]Starting timestamp (milliseconds since the Unix epoch) \item[\mbox{$\rightarrow$} {\em response\_\-string}]A string that will be loaded with the csv-\/format data from the database \end{DoxyParams}
\begin{DoxyReturn}{Returns}
The libcurl integer return code for the query (zero if everything worked ok, or nonzero if an error occurred) 
\end{DoxyReturn}
\hypertarget{classIFBeamDBInterface_a7b0e4c42767791f1904540b63772a74d}{
\index{IFBeamDBInterface@{IFBeamDBInterface}!QueryBeamDB@{QueryBeamDB}}
\index{QueryBeamDB@{QueryBeamDB}!IFBeamDBInterface@{IFBeamDBInterface}}
\subsubsection[{QueryBeamDB}]{\setlength{\rightskip}{0pt plus 5cm}std::map$<$ std::string, std::map$<$ uint64\_\-t, {\bf BeamDataPoint} $>$ $>$ IFBeamDBInterface::QueryBeamDB (uint64\_\-t {\em t0}, \/  uint64\_\-t {\em t1}) const}}
\label{classIFBeamDBInterface_a7b0e4c42767791f1904540b63772a74d}


Get information about the Booster Neutrino Beam (BNB) state from the database for the time interval \mbox{[}t0, t1\mbox{]}. 
\begin{DoxyParams}{Parameters}
\item[{\em t0}]Starting timestamp (milliseconds since the Unix epoch) \item[{\em t1}]Starting timestamp (milliseconds since the Unix epoch) \end{DoxyParams}
\begin{DoxyReturn}{Returns}
A nested map containing the parsed data. Keys of the outer map are device names, values are inner maps. Keys of the inner map are timestamps (milliseconds since the Unix epoch), values are \hyperlink{structBeamDataPoint}{BeamDataPoint} structs that hold a numerical value and a unit string. 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
An easy way to get the current milliseconds since the Unix epoch is to use the terminal utility date like this: \begin{DoxyVerb}date +%s%3N
    /// \end{DoxyVerb}
 I found this handy trick here: \href{http://unix.stackexchange.com/a/123764}{\tt http://unix.stackexchange.com/a/123764} 
\end{DoxyNote}


The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
UserTools/BeamFetcher/IFBeamDBInterface.h\item 
UserTools/BeamFetcher/IFBeamDBInterface.cpp\end{DoxyCompactItemize}
