<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ToolDAQFramework: IFBeamDBInterface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ToolDAQFramework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classIFBeamDBInterface-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">IFBeamDBInterface Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Singleton used to interact with the Intensity Frontier beam database at Fermilab.  
 <a href="classIFBeamDBInterface.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="IFBeamDBInterface_8h_source.html">IFBeamDBInterface.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac6e95cfed4db9c455289234f26a2f1c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac6e95cfed4db9c455289234f26a2f1c1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#ac6e95cfed4db9c455289234f26a2f1c1">~IFBeamDBInterface</a> ()</td></tr>
<tr class="memdesc:ac6e95cfed4db9c455289234f26a2f1c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up libcurl stuff as the <a class="el" href="classIFBeamDBInterface.html" title="Singleton used to interact with the Intensity Frontier beam database at Fermilab. ...">IFBeamDBInterface</a> object is destroyed. <br/></td></tr>
<tr class="separator:ac6e95cfed4db9c455289234f26a2f1c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac246a02f0726c599a8bd6db201c9c81"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aac246a02f0726c599a8bd6db201c9c81"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#aac246a02f0726c599a8bd6db201c9c81">IFBeamDBInterface</a> (const <a class="el" href="classIFBeamDBInterface.html">IFBeamDBInterface</a> &amp;)=delete</td></tr>
<tr class="memdesc:aac246a02f0726c599a8bd6db201c9c81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy constructor. <br/></td></tr>
<tr class="separator:aac246a02f0726c599a8bd6db201c9c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53bfb59f783375aeb96e520e1b8a4c8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae53bfb59f783375aeb96e520e1b8a4c8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#ae53bfb59f783375aeb96e520e1b8a4c8">IFBeamDBInterface</a> (<a class="el" href="classIFBeamDBInterface.html">IFBeamDBInterface</a> &amp;&amp;)=delete</td></tr>
<tr class="memdesc:ae53bfb59f783375aeb96e520e1b8a4c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted move constructor. <br/></td></tr>
<tr class="separator:ae53bfb59f783375aeb96e520e1b8a4c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3af28661e5c86ba91c795f841678188"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3af28661e5c86ba91c795f841678188"></a>
<a class="el" href="classIFBeamDBInterface.html">IFBeamDBInterface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#ad3af28661e5c86ba91c795f841678188">operator=</a> (const <a class="el" href="classIFBeamDBInterface.html">IFBeamDBInterface</a> &amp;)=delete</td></tr>
<tr class="memdesc:ad3af28661e5c86ba91c795f841678188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy assignment operator. <br/></td></tr>
<tr class="separator:ad3af28661e5c86ba91c795f841678188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbdd5916724ed8747b0e6ca705e07184"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adbdd5916724ed8747b0e6ca705e07184"></a>
<a class="el" href="classIFBeamDBInterface.html">IFBeamDBInterface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#adbdd5916724ed8747b0e6ca705e07184">operator=</a> (<a class="el" href="classIFBeamDBInterface.html">IFBeamDBInterface</a> &amp;&amp;)=delete</td></tr>
<tr class="memdesc:adbdd5916724ed8747b0e6ca705e07184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted move assignment operator. <br/></td></tr>
<tr class="separator:adbdd5916724ed8747b0e6ca705e07184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b0e4c42767791f1904540b63772a74d"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <br class="typebreak"/>
std::map&lt; uint64_t, <br class="typebreak"/>
<a class="el" href="structBeamDataPoint.html">BeamDataPoint</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#a7b0e4c42767791f1904540b63772a74d">QueryBeamDB</a> (uint64_t t0, uint64_t t1) const </td></tr>
<tr class="memdesc:a7b0e4c42767791f1904540b63772a74d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get information about the Booster Neutrino Beam (BNB) state from the database for the time interval [t0, t1].  <a href="#a7b0e4c42767791f1904540b63772a74d">More...</a><br/></td></tr>
<tr class="separator:a7b0e4c42767791f1904540b63772a74d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034ef023cb78989270a4ec2d54a5aa4f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#a034ef023cb78989270a4ec2d54a5aa4f">QueryBeamDB</a> (uint64_t t0, uint64_t t1, std::string &amp;response_string) const </td></tr>
<tr class="memdesc:a034ef023cb78989270a4ec2d54a5aa4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get information about the BNB state from the database for the time interval [t0, t1].  <a href="#a034ef023cb78989270a4ec2d54a5aa4f">More...</a><br/></td></tr>
<tr class="separator:a034ef023cb78989270a4ec2d54a5aa4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add525c53cbf0b85c3cd0d39a5b9b0fdd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBeamStatus.html">BeamStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#add525c53cbf0b85c3cd0d39a5b9b0fdd">GetBeamStatus</a> (uint64_t time) const </td></tr>
<tr class="memdesc:add525c53cbf0b85c3cd0d39a5b9b0fdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get information about the BNB state from the database as close as possible to a given time.  <a href="#add525c53cbf0b85c3cd0d39a5b9b0fdd">More...</a><br/></td></tr>
<tr class="separator:add525c53cbf0b85c3cd0d39a5b9b0fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a677ed1a3b7dbfc70ffb0688078ae5fb0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a677ed1a3b7dbfc70ffb0688078ae5fb0"></a>
static const <a class="el" href="classIFBeamDBInterface.html">IFBeamDBInterface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#a677ed1a3b7dbfc70ffb0688078ae5fb0">Instance</a> ()</td></tr>
<tr class="memdesc:a677ed1a3b7dbfc70ffb0688078ae5fb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a const reference to the singleton instance of the <a class="el" href="classIFBeamDBInterface.html" title="Singleton used to interact with the Intensity Frontier beam database at Fermilab. ...">IFBeamDBInterface</a>. <br/></td></tr>
<tr class="separator:a677ed1a3b7dbfc70ffb0688078ae5fb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:af5275e528b9b43d4c5dacd0a8a3ca62b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5275e528b9b43d4c5dacd0a8a3ca62b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#af5275e528b9b43d4c5dacd0a8a3ca62b">IFBeamDBInterface</a> ()</td></tr>
<tr class="memdesc:af5275e528b9b43d4c5dacd0a8a3ca62b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the singleton <a class="el" href="classIFBeamDBInterface.html" title="Singleton used to interact with the Intensity Frontier beam database at Fermilab. ...">IFBeamDBInterface</a> object. <br/></td></tr>
<tr class="separator:af5275e528b9b43d4c5dacd0a8a3ca62b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a950bec54fb41eaf48471a8a1eab8ab71"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a950bec54fb41eaf48471a8a1eab8ab71"></a>
std::map&lt; std::string, <br class="typebreak"/>
std::map&lt; uint64_t, <br class="typebreak"/>
<a class="el" href="structBeamDataPoint.html">BeamDataPoint</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>ParseDBResponse</b> (const std::string &amp;response) const </td></tr>
<tr class="separator:a950bec54fb41eaf48471a8a1eab8ab71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d7b151e8b21fe5f7d255d442d37e321"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d7b151e8b21fe5f7d255d442d37e321"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PostprocessParsedResponse</b> (std::map&lt; std::string, std::map&lt; uint64_t, <a class="el" href="structBeamDataPoint.html">BeamDataPoint</a> &gt; &gt; &amp;parsed_response) const </td></tr>
<tr class="separator:a2d7b151e8b21fe5f7d255d442d37e321"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7dea07c539e0f0ca765f02d198345d2d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7dea07c539e0f0ca765f02d198345d2d"></a>
CURL *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIFBeamDBInterface.html#a7dea07c539e0f0ca765f02d198345d2d">fCurl</a> = nullptr</td></tr>
<tr class="memdesc:a7dea07c539e0f0ca765f02d198345d2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer used to interact with libcurl. <br/></td></tr>
<tr class="separator:a7dea07c539e0f0ca765f02d198345d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Singleton used to interact with the Intensity Frontier beam database at Fermilab. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="add525c53cbf0b85c3cd0d39a5b9b0fdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBeamStatus.html">BeamStatus</a> IFBeamDBInterface::GetBeamStatus </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get information about the BNB state from the database as close as possible to a given time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>Timestamp (milliseconds since the Unix epoch) to use when searching the database </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7b0e4c42767791f1904540b63772a74d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::string, std::map&lt; uint64_t, <a class="el" href="structBeamDataPoint.html">BeamDataPoint</a> &gt; &gt; IFBeamDBInterface::QueryBeamDB </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get information about the Booster Neutrino Beam (BNB) state from the database for the time interval [t0, t1]. </p>
<pre class="fragment">@param t0 Starting timestamp (milliseconds since the Unix epoch)
@param t1 Starting timestamp (milliseconds since the Unix epoch)
@return A nested map containing the parsed data. Keys of the outer map
are device names, values are inner maps. Keys of the inner map are
timestamps (milliseconds since the Unix epoch), values are
BeamDataPoint structs that hold a numerical value and a unit string.
@note An easy way to get the current milliseconds since the Unix epoch
is to use the terminal utility date like this:@verbatim date +%s%3N
</pre><p> ///  I found this handy trick here: <a href="http://unix.stackexchange.com/a/123764">http://unix.stackexchange.com/a/123764</a> </p>

</div>
</div>
<a class="anchor" id="a034ef023cb78989270a4ec2d54a5aa4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IFBeamDBInterface::QueryBeamDB </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>response_string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get information about the BNB state from the database for the time interval [t0, t1]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">t0</td><td>Starting timestamp (milliseconds since the Unix epoch) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">t1</td><td>Starting timestamp (milliseconds since the Unix epoch) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response_string</td><td>A string that will be loaded with the csv-format data from the database </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The libcurl integer return code for the query (zero if everything worked ok, or nonzero if an error occurred) </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>UserTools/BeamFetcher/<a class="el" href="IFBeamDBInterface_8h_source.html">IFBeamDBInterface.h</a></li>
<li>UserTools/BeamFetcher/IFBeamDBInterface.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
